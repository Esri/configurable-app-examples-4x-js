!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.calciteMarketing=e()}(this,function(){"use strict";function t(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.getAttribute("class"))}function e(e,n){n.split(" ").forEach(function(n){t(e,n)||e.setAttribute("class",e.getAttribute("class")+" "+n)})}function n(e,n){n.split(" ").forEach(function(n){var i=e.getAttribute("class").replace(new RegExp("(\\s|^)"+n+"(\\s|$)","g"),"$2");t(e,n)&&e.setAttribute("class",i)})}function i(t){t=s(t),t.forEach(function(t){n(t,"is-active")})}function r(t){t=s(t),t.forEach(function(t){e(t,"is-active")})}function s(t){return Array.isArray(t)?t:Array.prototype.slice.call(t)}function c(t,e){var n=e||document,i=n.querySelectorAll(t);return s(i)}function o(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):void 0}function a(){}function u(){function t(t){t?e(t.node):a.forEach(function(t){e(t)})}function e(t){o(t,"click",n)}function n(t){t.preventDefault();var e={set:t.target.getAttribute("data-set"),target:t.target.getAttribute("data-view")};f.emit("switcher:toggle",e)}function s(t){var e=c(".js-view[data-set="+t.set+"]"),n=c(".js-view[data-set="+t.set+"][data-view="+t.target+"]"),s=c(".js-view-toggle[data-set="+t.set+"]"),o=c(".js-view-toggle[data-set="+t.set+"][data-view="+t.target+"]");i(e),i(s),r(n),r(o)}var a=c(".js-view-toggle");f.on("switcher:bind",t),f.on("switcher:toggle",s),f.emit("switcher:bind")}a.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){r.off(t,i),e.apply(n,arguments)}var r=this;return i._=e,this.on(t,i,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var s=0,c=i.length;s<c;s++)i[s].fn!==e&&i[s].fn._!==e&&r.push(i[s]);return r.length?n[t]=r:delete n[t],this}};var f=new a,l={viewSwitcher:u};return l});